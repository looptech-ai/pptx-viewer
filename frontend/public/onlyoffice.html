<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>ONLYOFFICE Viewer</title>
  <style>
    html, body { margin: 0; padding: 0; height: 100%; overflow: hidden; }
    #placeholder { height: 100%; }
  </style>
</head>
<body>
  <div id="placeholder"></div>

  <!-- ONLYOFFICE Document Server API -->
  <script src="http://localhost:8080/web-apps/apps/api/documents/api.js"></script>

  <script>
    // Get config from URL params
    const params = new URLSearchParams(window.location.search);
    const configUrl = params.get('configUrl');

    if (configUrl) {
      fetch(configUrl)
        .then(res => res.json())
        .then(config => {
          console.log('ONLYOFFICE config:', config);

          // Initialize the editor
          new DocsAPI.DocEditor('placeholder', {
            ...config,
            events: {
              onDocumentReady: () => {
                console.log('Document is ready');
              },
              onError: (event) => {
                console.error('ONLYOFFICE error:', event.data);
              }
            }
          });
        })
        .catch(err => {
          console.error('Failed to load config:', err);
          document.body.innerHTML = '<p style="padding: 20px; color: red;">Failed to load document config</p>';
        });
    } else {
      document.body.innerHTML = '<p style="padding: 20px;">No config URL provided</p>';
    }
  </script>
</body>
</html>
